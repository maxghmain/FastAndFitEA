<!-- Chosen Palette: Professional Forex Blue (Navy, White, Slate, Success Green) -->
<!-- Application Structure Plan: 
    1. **Onboarding:** ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
    2. **Interactive Guide:** ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡∏•‡∏∞ Step (Stepper) ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏¢‡∏≤‡∏ß‡πÜ
    3. **Calculator (Simulator):** ‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á Text ‡πÉ‡∏ô‡∏Ç‡πâ‡∏≠ 5 (Input) ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏£‡∏¥‡∏á
        - User ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô -> App ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Safety Stop Out ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏à‡∏£‡∏¥‡∏á
        - User ‡∏Å‡∏£‡∏≠‡∏Å Max Lot/Max Orders -> App ‡∏û‡∏•‡πá‡∏≠‡∏ï‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÑ‡∏°‡πâ (Martingale) ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πâ‡πÑ‡∏´‡∏ô‡∏à‡∏∞‡∏ï‡∏¥‡∏î Max Lot
-->
<!-- Visualization & Content Choices:
    1. **CSS Mockups:** ‡πÉ‡∏ä‡πâ CSS ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≥‡∏•‡∏≠‡∏á MT5 ‡πÅ‡∏ó‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏°‡∏ä‡∏±‡∏î‡πÅ‡∏•‡∏∞‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ß
    2. **Chart.js (Doughnut):** ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô (Safety vs Risk) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 30%" ‡πÅ‡∏ö‡∏ö‡πÄ‡∏´‡πá‡∏ô‡∏†‡∏≤‡∏û
    3. **Chart.js (Bar):** ‡πÅ‡∏™‡∏î‡∏á Step ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏°‡πâ (Martingale) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏Ç‡∏≠‡∏á Max Lot
-->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ EA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap');
        body { font-family: 'Sarabun', sans-serif; background-color: #f8fafc; }
        
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        /* Mockup Styles for MT5 Windows */
        .mt5-window {
            background: #f0f0f0;
            border: 1px solid #999;
            box-shadow: 4px 4px 10px rgba(0,0,0,0.15);
            font-family: Tahoma, sans-serif;
            font-size: 13px;
        }
        .mt5-header {
            background: linear-gradient(to bottom, #e0e0e0, #c0c0c0);
            padding: 4px 8px;
            border-bottom: 1px solid #999;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: black;
            font-weight: bold;
        }
        .mt5-body { padding: 12px; background: white; }
        
        /* Input Table Styles */
        .mt5-table { width: 100%; border-collapse: collapse; font-family: 'Tahoma', sans-serif; font-size: 11px; }
        .mt5-table th { background-color: #f0f0f0; border: 1px solid #d0d0d0; padding: 2px 4px; text-align: left; font-weight: normal; color: #555; }
        .mt5-table td { border: 1px solid #e0e0e0; padding: 2px 4px; color: #333; }
        .mt5-table tr:nth-child(even) { background-color: #f9f9f9; }
        .mt5-icon-ab { color: #d97706; font-weight: bold; margin-right: 4px; font-family: serif; }
        .mt5-icon-num { color: #2563eb; font-weight: bold; margin-right: 4px; font-size: 10px; }

        .nav-btn.active { background-color: #2563eb; color: white; }
        .nav-btn:not(.active):hover { background-color: #e2e8f0; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Sim Input Styles to match MT5 */
        .sim-input-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed #e2e8f0;
        }
        .sim-input-label {
            font-family: 'Tahoma', sans-serif;
            font-size: 12px;
            color: #333;
            flex: 1;
            padding-right: 8px;
        }
        .sim-input-field {
            width: 100px;
        }
        
        /* Info box style for explanations */
        .info-box {
            font-size: 11px;
            color: #475569;
            background-color: #f1f5f9;
            padding: 8px;
            border-radius: 4px;
            margin-bottom: 12px;
            border-left: 3px solid #cbd5e1;
            line-height: 1.5;
        }
        .info-title {
            font-weight: bold;
            color: #334155;
            display: block;
            margin-bottom: 2px;
        }
    </style>
</head>
<body class="text-slate-800">

    <!-- Top Bar -->
    <nav class="bg-slate-900 text-white sticky top-0 z-50 shadow-md">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <!-- LOGO & BRANDING -->
                <div class="font-bold text-xl tracking-wide flex items-center gap-3">
                    <img src="https://raw.githubusercontent.com/maxghmain/FastAndFitEA/refs/heads/main/A%20200x200%20logo%20design%20for%20'Fast%20and%20Fit%20EA%20Over%20Trand'.%20The%20logo%20should%20convey%20speed%2C%20fitness%2C%20and%20f.jpeg" alt="FAF Logo" class="h-10 w-10 rounded-full border border-white/20 object-cover">
                    <span>FAF Team (Fast and Fit EA)</span>
                </div>
                
                <div class="flex space-x-2">
                    <button onclick="switchTab('guide')" id="btn-guide" class="nav-btn active px-4 py-2 rounded-md text-sm font-medium transition">‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á</button>
                    <button onclick="switchTab('sim')" id="btn-sim" class="nav-btn px-4 py-2 rounded-md text-sm font-medium transition bg-slate-800 text-slate-300">‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 py-8">

        <!-- VIEW 1: GUIDE (Installation Steps) -->
        <div id="view-guide" class="block animate-fade-in">
            <div class="text-center mb-10">
                <h1 class="text-3xl font-bold text-slate-900 mb-3">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á EA</h1>
                <p class="text-slate-500">‡∏ó‡∏≥‡∏ï‡∏≤‡∏° 4 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ó‡∏£‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                <button onclick="setStep(1)" id="step-btn-1" class="p-4 rounded-lg bg-blue-50 border-2 border-blue-500 text-left transition hover:shadow-md">
                    <span class="block text-xs font-bold text-blue-600 uppercase">Step 1</span>
                    <span class="font-bold text-slate-800">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Options</span>
                </button>
                <button onclick="setStep(2)" id="step-btn-2" class="p-4 rounded-lg bg-white border border-slate-200 text-left transition hover:shadow-md hover:border-blue-300">
                    <span class="block text-xs font-bold text-slate-400 uppercase">Step 2</span>
                    <span class="font-bold text-slate-600">‡∏•‡∏á‡∏Å‡∏£‡∏≤‡∏ü</span>
                </button>
                <button onclick="setStep(3)" id="step-btn-3" class="p-4 rounded-lg bg-white border border-slate-200 text-left transition hover:shadow-md hover:border-blue-300">
                    <span class="block text-xs font-bold text-slate-400 uppercase">Step 3</span>
                    <span class="font-bold text-slate-600">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Common</span>
                </button>
                <button onclick="setStep(4)" id="step-btn-4" class="p-4 rounded-lg bg-white border border-slate-200 text-left transition hover:shadow-md hover:border-blue-300">
                    <span class="block text-xs font-bold text-slate-400 uppercase">Step 4</span>
                    <span class="font-bold text-slate-600">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Input</span>
                </button>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-8 min-h-[400px]">
                
                <!-- Step 1 Content -->
                <div id="step-content-1" class="block">
                    <div class="flex flex-col md:flex-row gap-8 items-start">
                        <div class="flex-1 space-y-4">
                            <h2 class="text-2xl font-bold text-slate-800">1. ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏£‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</h2>
                            <p class="text-slate-600 leading-relaxed">
                                ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π <strong>Tools -> Options</strong> (‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î Ctrl+O) <br>
                                ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ó‡πá‡∏ö <strong>Expert Advisors</strong> ‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡πä‡∏Å‡∏ñ‡∏π‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏û‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤
                            </p>
                            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded text-sm text-yellow-800">
                                <strong>‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</strong> ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏ï‡∏¥‡πä‡∏Å‡∏ä‡πà‡∏≠‡∏á "Allow algorithmic trading" EA ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ (‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏´‡∏°‡∏ß‡∏Å‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏ó‡∏≤)
                            </div>
                        </div>
                        <div class="flex-1 w-full flex justify-center">
                            <!-- CSS Mockup: Options Window -->
                            <div class="mt5-window w-full max-w-sm">
                                <div class="mt5-header">
                                    <span>Options</span>
                                    <span class="cursor-pointer">‚úï</span>
                                </div>
                                <div class="mt5-body">
                                    <div class="flex space-x-2 text-xs border-b pb-2 mb-3 text-slate-600">
                                        <span>Server</span> <span>Charts</span> <span class="text-blue-600 font-bold bg-blue-50 px-1 rounded">Expert Advisors</span> <span>Events</span>
                                    </div>
                                    <div class="space-y-2">
                                        <label class="flex items-center space-x-2 p-2 bg-blue-50 border border-blue-200 rounded cursor-pointer">
                                            <input type="checkbox" checked class="accent-blue-600 w-4 h-4">
                                            <span class="font-bold text-sm">Allow algorithmic trading</span>
                                        </label>
                                        <div class="pl-6 space-y-1 opacity-60 text-xs">
                                            <label class="flex items-center space-x-2"><input type="checkbox" checked disabled> <span>Disable... when account changed</span></label>
                                            <label class="flex items-center space-x-2"><input type="checkbox" checked disabled> <span>Disable... when profile changed</span></label>
                                        </div>
                                    </div>
                                    <div class="flex justify-end gap-2 mt-4">
                                        <button class="px-3 py-1 bg-gray-200 border rounded text-xs hover:bg-gray-300">OK</button>
                                        <button class="px-3 py-1 bg-gray-200 border rounded text-xs hover:bg-gray-300">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2 Content -->
                <div id="step-content-2" class="hidden">
                    <div class="flex flex-col md:flex-row gap-8 items-center">
                        <div class="flex-1 space-y-4">
                            <h2 class="text-2xl font-bold text-slate-800">2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á EA ‡∏•‡∏á‡∏Å‡∏£‡∏≤‡∏ü</h2>
                            <p class="text-slate-600">
                                1. ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏£‡∏≤‡∏ü‡∏Ñ‡∏π‡πà‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏£‡∏î (‡πÄ‡∏ä‡πà‡∏ô <strong>XAUUSD</strong>)<br>
                                2. ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á <strong>Navigator</strong> (Ctrl+N)<br>
                                3. ‡∏•‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå EA ‡∏ä‡∏∑‡πà‡∏≠ <code>fastAndFit_Ea_Return</code> ‡∏•‡∏á‡πÑ‡∏õ‡πÉ‡∏ô‡∏Å‡∏£‡∏≤‡∏ü
                            </p>
                        </div>
                        <div class="flex-1 flex justify-center">
                            <div class="relative w-64 h-48 bg-slate-800 rounded border-2 border-slate-600 flex items-center justify-center overflow-hidden">
                                <span class="absolute top-2 left-2 text-xs text-slate-400">XAUUSD, H1</span>
                                <!-- Simulated Drag -->
                                <div class="absolute inset-0 flex items-center justify-center bg-black/20">
                                    <div class="bg-white px-4 py-2 rounded shadow-lg border border-slate-300 flex items-center gap-2 animate-bounce">
                                        <span class="text-xl">üéì</span>
                                        <span class="font-mono text-sm font-bold">EA File</span>
                                    </div>
                                </div>
                                <div class="absolute bottom-4 text-white/50 text-sm">Drop here</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3 Content -->
                <div id="step-content-3" class="hidden">
                    <div class="flex flex-col md:flex-row gap-8 items-start">
                        <div class="flex-1 space-y-4">
                            <h2 class="text-2xl font-bold text-slate-800">3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏ó‡πá‡∏ö Common</h2>
                            <p class="text-slate-600">
                                ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏≤‡∏Å EA ‡∏•‡∏á‡∏Å‡∏£‡∏≤‡∏ü ‡∏à‡∏∞‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÄ‡∏î‡πâ‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ ‡πÉ‡∏´‡πâ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö <strong>Common</strong> <br>
                                ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡∏¥‡πä‡∏Å‡∏ñ‡∏π‡∏Å‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏≠‡∏á <strong>Allow Algo Trading</strong>
                            </p>
                        </div>
                        <div class="flex-1 flex justify-center">
                            <!-- CSS Mockup: EA Properties -->
                            <div class="mt5-window w-full max-w-sm">
                                <div class="mt5-header">
                                    <span>fastAndFit_Ea_Return 1.00</span>
                                    <span>‚úï</span>
                                </div>
                                <div class="mt5-body">
                                    <div class="flex space-x-4 text-xs border-b pb-2 mb-3">
                                        <span class="font-bold text-blue-700 border-b-2 border-blue-700 pb-1">Common</span>
                                        <span class="text-slate-500">Inputs</span>
                                    </div>
                                    <div class="flex items-center gap-3 mb-4">
                                        <div class="text-3xl text-blue-600">üéì</div>
                                        <div>
                                            <div class="font-bold text-sm">fastAndFit_Ea_Return</div>
                                            <div class="text-xs text-gray-500">Copyright 2025, MetaQuotes Ltd.</div>
                                        </div>
                                    </div>
                                    <div class="border-t pt-3">
                                        <label class="flex items-center space-x-2">
                                            <input type="checkbox" checked class="accent-blue-600 w-4 h-4">
                                            <span class="font-bold text-sm">Allow Algo Trading</span>
                                        </label>
                                    </div>
                                    <div class="flex justify-end gap-2 mt-6">
                                        <button class="px-3 py-1 bg-gray-200 border rounded text-xs hover:bg-gray-300">OK</button>
                                        <button class="px-3 py-1 bg-gray-200 border rounded text-xs hover:bg-gray-300">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4 Content (Updated with CSS Mockup) -->
                <div id="step-content-4" class="hidden">
                    <div class="flex flex-col md:flex-row gap-8 items-start">
                        <div class="flex-1 space-y-4">
                            <h2 class="text-2xl font-bold text-slate-800">4. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Inputs</h2>
                            <p class="text-slate-600 mb-4">
                                ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö <strong>Inputs</strong> <br>
                                ‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡πà‡∏≤‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô (‡∏î‡∏π‡∏†‡∏≤‡∏û‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤)
                            </p>
                            <button onclick="switchTab('sim')" class="bg-blue-600 text-white px-6 py-3 rounded-full font-bold shadow-lg hover:bg-blue-700 hover:scale-105 transition transform flex items-center gap-2">
                                <span>üöÄ</span> ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏≥‡∏•‡∏≠‡∏á (Simulator)
                            </button>
                        </div>
                        <div class="flex-1 flex justify-center">
                            <!-- CSS Mockup: Inputs Window (Recreated from image) -->
                            <div class="mt5-window w-full max-w-md mx-auto">
                                <div class="mt5-header">
                                    <span>fastAndFit_Ea_Return 1.00 (XAUUSDm,M1)</span>
                                    <span class="cursor-pointer">‚úï</span>
                                </div>
                                <div class="mt5-body">
                                    <div class="flex space-x-4 text-xs border-b pb-2 mb-3">
                                        <span class="text-slate-500 cursor-pointer">Common</span>
                                        <span class="font-bold text-blue-700 border-b-2 border-blue-700 pb-1 cursor-pointer">Inputs</span>
                                    </div>
                                    
                                    <!-- Table Mockup -->
                                    <div class="border border-gray-300 bg-white h-48 overflow-y-auto custom-scrollbar relative">
                                        <table class="mt5-table w-full">
                                            <thead class="sticky top-0 bg-gray-100 z-10 shadow-sm">
                                                <tr>
                                                    <th class="w-2/3">Variable</th>
                                                    <th class="w-1/3">Value</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><span class="mt5-icon-ab">ab</span> ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏π‡πà‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏ó‡∏£‡∏î >></td>
                                                    <td>XAUUSDm</td>
                                                </tr>
                                                <tr>
                                                    <td><span class="mt5-icon-num">1/2</span> ‡∏Ñ‡πà‡∏≤ Lot Size ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô >></td>
                                                    <td>0.01</td>
                                                </tr>
                                                <tr>
                                                    <td><span class="mt5-icon-num">1/2</span> ‡∏Ñ‡πà‡∏≤ Lot Size ‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ Loss ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á >></td>
                                                    <td>0.01</td>
                                                </tr>
                                                <tr>
                                                    <td><span class="mt5-icon-num">1/2</span> ‡∏´‡∏¢‡∏∏‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î Order ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠ ‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ ></td>
                                                    <td>9999999.0</td>
                                                </tr>
                                                <tr>
                                                    <td><span class="mt5-icon-num">1/2</span> ‡πÄ‡∏û‡∏¥‡πà‡∏° Lot Size ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ñ‡∏∂‡∏á >></td>
                                                    <td>9999.0</td>
                                                </tr>
                                                <tr>
                                                    <td><span class="mt5-icon-num">1/2</span> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏°‡πâ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ñ‡∏∂‡∏á >></td>
                                                    <td>9999.0</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <div class="flex justify-end gap-2 mt-4">
                                        <button class="px-4 py-1 bg-gray-200 border border-gray-300 rounded text-xs hover:bg-gray-300 shadow-sm">OK</button>
                                        <button class="px-4 py-1 bg-gray-200 border border-gray-300 rounded text-xs hover:bg-gray-300 shadow-sm">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- VIEW 2: SIMULATOR -->
        <div id="view-sim" class="hidden animate-fade-in">
            <div class="mb-6 flex flex-col md:flex-row justify-between items-end">
                <div>
                    <h1 class="text-3xl font-bold text-slate-900">EA Input Simulator</h1>
                    <p class="text-slate-500">‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ Parameter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡πà‡∏≠‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏£‡∏¥‡∏á</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                
                <!-- INPUT PANEL -->
                <div class="lg:col-span-4 bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden">
                    <div class="bg-slate-100 px-6 py-4 border-b border-slate-200 font-bold text-slate-700 flex items-center gap-2">
                        <span>üéõ</span> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå (Inputs)
                    </div>
                    
                    <!-- Added Reference Mockup for Simulator -->
                    <div class="bg-slate-50 p-4 border-b border-slate-100 text-center">
                        <p class="text-xs text-slate-500 mb-2">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á Inputs ‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á</p>
                        <!-- Updated Image Source -->
                        <img src="https://raw.githubusercontent.com/maxghmain/FastAndFitEA/refs/heads/main/image.png" alt="MT5 Inputs Real" class="mx-auto rounded border border-slate-200 shadow-sm max-h-40 object-contain hover:scale-110 transition-transform cursor-pointer">
                    </div>

                    <div class="p-6 space-y-4">
                        
                        <!-- Capital (Extra for Sim) -->
                        <div class="bg-blue-50 p-3 rounded-lg mb-4 border border-blue-100">
                            <label class="block text-xs font-bold text-blue-800 mb-1">üí∞ ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô‡πÉ‡∏ô‡∏û‡∏≠‡∏£‡πå‡∏ï (Balance)</label>
                            <input type="number" id="inp-capital" value="1000" class="w-full border p-2 rounded focus:ring-2 focus:ring-blue-500 focus:outline-none bg-white text-right font-mono" oninput="updateSim()">
                        </div>

                        <!-- MT5 Style Inputs -->
                        <div class="space-y-0 border-t border-slate-200">
                            
                            <!-- 1. Currency & 2. Start Lot -->
                            <div class="sim-input-row">
                                <div class="sim-input-label flex items-center">
                                    <span class="mt5-icon-ab">ab</span> ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏π‡πà‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏ó‡∏£‡∏î >>
                                </div>
                                <div class="sim-input-field text-right text-xs text-gray-500">
                                    XAUUSDm
                                </div>
                            </div>
                            <div class="sim-input-row">
                                <div class="sim-input-label flex items-center">
                                    <span class="mt5-icon-num">1/2</span> ‡∏Ñ‡πà‡∏≤ Lot Size ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô >>
                                </div>
                                <div class="sim-input-field">
                                    <input type="number" step="0.01" id="inp-start-lot" value="0.01" class="w-full border p-1 rounded text-right text-xs" oninput="updateSim()">
                                </div>
                            </div>
                            <!-- Explainer 5.1 -->
                            <div class="info-box">
                                <span class="info-title">5.1) ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏π‡πà‡πÄ‡∏á‡∏¥‡∏ô & Lot Size ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</span>
                                ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏π‡πà‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á ‡πÇ‡∏ö‡∏£‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÜ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏ó‡∏£‡∏î ‡πÄ‡∏ä‡πà‡∏ô XAUUSDm<br>
                                <strong>Lot Size ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô:</strong> ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏µ‡πà‡∏ó‡∏∏‡∏ô <strong>1000 : 0.01</strong>
                            </div>

                            <!-- 3. Lot Step -->
                            <div class="sim-input-row">
                                <div class="sim-input-label flex items-center">
                                    <span class="mt5-icon-num">1/2</span> ‡∏Ñ‡πà‡∏≤ Lot Size ‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ Loss ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á >>
                                </div>
                                <div class="sim-input-field">
                                    <input type="number" step="0.01" id="inp-lot-step" value="0.01" class="w-full border p-1 rounded text-right text-xs" oninput="updateSim()">
                                </div>
                            </div>
                            <p id="warning-step" class="hidden text-[10px] text-red-500 text-right bg-red-50 p-1 rounded mb-2">‚ö†Ô∏è ‡∏Ñ‡∏ß‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö Lot ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</p>
                            <!-- Explainer 5.2 -->
                            <div class="info-box">
                                <span class="info-title">5.2) ‡∏Ñ‡πà‡∏≤ Lot Size ‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô (Step)</span>
                                ‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏ï‡∏≤‡∏° Lot Size ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡∏´‡∏≤‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô 0.5 ‡∏Ñ‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏Å‡πá‡∏ï‡πâ‡∏≠‡∏á 0.5 ‡∏î‡πâ‡∏ß‡∏¢ ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏≥‡∏ó‡∏∏‡∏ô‡∏Ñ‡∏∑‡∏ô
                            </div>

                            <!-- 4. Stop Program (Safety) -->
                            <div class="sim-input-row flex-col items-stretch !items-start">
                                <div class="sim-input-label flex items-center w-full mb-1">
                                    <span class="mt5-icon-num">1/2</span> ‡∏´‡∏¢‡∏∏‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î Order ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠ ‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ >
                                </div>
                                <div class="flex items-center justify-between w-full bg-slate-50 p-2 rounded border border-slate-100">
                                    <div class="flex-1 mr-2">
                                        <input type="range" id="inp-safety" min="10" max="90" value="30" class="w-full h-1 bg-slate-300 rounded-lg appearance-none cursor-pointer accent-blue-600" oninput="updateSim()">
                                        <div class="text-[10px] text-slate-500">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏∏‡∏ô‡πÑ‡∏ß‡πâ <span id="txt-safety-pct" class="font-bold text-blue-600">30%</span></div>
                                    </div>
                                    <div class="text-xs font-bold text-slate-700 bg-white border px-2 py-1 rounded" id="txt-stopout-display">
                                        300.0
                                    </div>
                                </div>
                            </div>
                            <!-- Explainer 5.3 -->
                            <div class="info-box">
                                <span class="info-title">5.3) Safety ‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô (Stop Out)</span>
                                ‡∏ñ‡πâ‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏´‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏î‡∏≠‡∏¢ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏´‡∏¢‡∏∏‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 1 ‡∏à‡∏≤‡∏Å 1000) ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÑ‡∏´‡∏ß ‡πÅ‡∏ï‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ <strong>30%</strong> ‡∏Ç‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÑ‡∏°‡πà‡∏Ñ‡∏≤‡∏î‡∏ù‡∏±‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡∏∏‡∏ô 1000 ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÑ‡∏ß‡πâ 300)
                            </div>

                            <!-- 5. Max Lot -->
                            <div class="sim-input-row">
                                <div class="sim-input-label flex items-center">
                                    <span class="mt5-icon-num">1/2</span> ‡πÄ‡∏û‡∏¥‡πà‡∏° Lot Size ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ñ‡∏∂‡∏á >>
                                </div>
                                <div class="sim-input-field">
                                    <input type="number" step="0.01" id="inp-max-lot" value="0.03" class="w-full border p-1 rounded text-right text-xs" oninput="updateSim()">
                                </div>
                            </div>
                            <!-- Explainer 5.4 -->
                            <div class="info-box">
                                <span class="info-title">5.4) ‡πÄ‡∏û‡∏¥‡πà‡∏° Lot Size ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</span>
                                ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏û‡∏î‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏ö‡πÑ‡∏°‡πâ (Martingale) ‡πÄ‡∏ä‡πà‡∏ô ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ 0.05 ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏ï‡∏±‡πâ‡∏á Max ‡πÑ‡∏ß‡πâ 0.03 ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏≠‡∏≠‡∏Å‡πÅ‡∏Ñ‡πà 0.03<br>
                                <em>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á:</em> ‡∏´‡∏≤‡∏Å‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏ß‡πâ‡∏ï‡πà‡∏≥‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏∏‡∏ô‡∏ä‡πâ‡∏≤‡∏•‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô‡πÑ‡∏î‡πâ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ Default ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
                            </div>

                            <!-- 6. Max Orders -->
                            <div class="sim-input-row">
                                <div class="sim-input-label flex items-center">
                                    <span class="mt5-icon-num">1/2</span> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏°‡πâ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ñ‡∏∂‡∏á >>
                                </div>
                                <div class="sim-input-field">
                                    <input type="number" id="inp-max-orders" value="5" class="w-full border p-1 rounded text-right text-xs" oninput="updateSim()">
                                </div>
                            </div>
                            <!-- Explainer 5.5 -->
                            <div class="info-box">
                                <span class="info-title">5.5) ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏°‡πâ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</span>
                                ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏°‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏Å‡πâ‡πÄ‡∏Å‡∏° (‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏û‡πâ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ) ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡πÄ‡∏ä‡πà‡∏ô ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏ó‡∏µ‡πà 4 ‡∏Å‡πá‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏ß‡πâ ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏∏‡∏ô‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô
                            </div>

                        </div>
                    </div>
                </div>

                <!-- CHARTS PANEL -->
                <div class="lg:col-span-8 space-y-6">
                    
                    <!-- Safety Chart -->
                    <div class="bg-white rounded-xl shadow-md p-6 border border-slate-100">
                        <h3 class="text-lg font-bold text-slate-800 mb-2">üìä ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (Safety Analysis)</h3>
                        <p class="text-sm text-slate-500 mb-4">‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÑ‡∏ß‡πâ (‡∏™‡∏µ‡πÅ‡∏î‡∏á) vs ‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÑ‡∏õ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏ó‡∏£‡∏î‡πÑ‡∏î‡πâ (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß)</p>
                        
                        <div class="flex flex-col md:flex-row items-center gap-6">
                            <div class="w-48 h-48 flex-shrink-0">
                                <canvas id="safetyChart"></canvas>
                            </div>
                            <div class="flex-1 space-y-3 w-full">
                                <div class="bg-green-50 p-3 rounded-lg border-l-4 border-green-500 flex justify-between items-center">
                                    <div>
                                        <div class="text-xs text-green-800 uppercase font-bold">Risk Capital (‡πÄ‡∏ó‡∏£‡∏î‡πÑ‡∏î‡πâ)</div>
                                        <div class="text-sm text-green-700">‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ó‡∏≥‡∏Å‡∏≥‡πÑ‡∏£‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏°‡πâ</div>
                                    </div>
                                    <div class="text-xl font-bold text-green-700" id="val-risk">$700</div>
                                </div>
                                <div class="bg-red-50 p-3 rounded-lg border-l-4 border-red-500 flex justify-between items-center">
                                    <div>
                                        <div class="text-xs text-red-800 uppercase font-bold">Safety Guard (‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏ó‡∏£‡∏î)</div>
                                        <div class="text-sm text-red-700">‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡πâ‡∏≤‡∏á‡∏û‡∏≠‡∏£‡πå‡∏ï</div>
                                    </div>
                                    <div class="text-xl font-bold text-red-700" id="val-safe">$300</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Lot Chart -->
                    <div class="bg-white rounded-xl shadow-md p-6 border border-slate-100">
                        <h3 class="text-lg font-bold text-slate-800 mb-2">üìà ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÑ‡∏°‡πâ (Martingale Step)</h3>
                        <p class="text-sm text-slate-500 mb-4">‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡∏ô‡∏≤‡∏î Lot ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏≠‡∏≠‡∏Å‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÑ‡∏°‡πâ (‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö Max Lot ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ)</p>
                        
                        <div class="chart-container">
                            <canvas id="lotChart"></canvas>
                        </div>
                        
                        <div class="mt-4 p-3 bg-blue-50 rounded text-sm text-blue-800 flex items-start gap-2">
                            <span class="text-lg">üí°</span>
                            <span id="lot-insight">Max Lot Size ‡∏ñ‡∏π‡∏Å‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà 0.03 ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πâ‡∏ó‡∏µ‡πà 4 ‡πÅ‡∏•‡∏∞ 5 ‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏¥‡πà‡∏° Lot ‡∏ã‡∏∂‡πà‡∏á‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏∏‡∏ô‡∏ä‡πâ‡∏≤‡∏•‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ‡πÅ‡∏ï‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤</span>
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </main>

    <script>
        // --- Navigation ---
        function switchTab(tab) {
            document.getElementById('view-guide').classList.add('hidden');
            document.getElementById('view-sim').classList.add('hidden');
            
            document.getElementById('btn-guide').classList.remove('active');
            document.getElementById('btn-guide').classList.add('bg-slate-800', 'text-slate-300'); // Inactive style
            document.getElementById('btn-sim').classList.remove('active');
            document.getElementById('btn-sim').classList.add('bg-slate-800', 'text-slate-300'); // Inactive style

            if (tab === 'guide') {
                document.getElementById('view-guide').classList.remove('hidden');
                document.getElementById('btn-guide').classList.add('active');
                document.getElementById('btn-guide').classList.remove('bg-slate-800', 'text-slate-300');
            } else {
                document.getElementById('view-sim').classList.remove('hidden');
                document.getElementById('btn-sim').classList.add('active');
                document.getElementById('btn-sim').classList.remove('bg-slate-800', 'text-slate-300');
                updateSim(); // Force update charts
            }
        }

        function setStep(step) {
            // Update buttons
            for(let i=1; i<=4; i++) {
                const btn = document.getElementById(`step-btn-${i}`);
                const content = document.getElementById(`step-content-${i}`);
                
                if(i === step) {
                    btn.classList.remove('bg-white', 'border-slate-200');
                    btn.classList.add('bg-blue-50', 'border-2', 'border-blue-500');
                    btn.querySelector('span:first-child').classList.replace('text-slate-400', 'text-blue-600');
                    content.classList.remove('hidden');
                } else {
                    btn.classList.add('bg-white', 'border-slate-200');
                    btn.classList.remove('bg-blue-50', 'border-2', 'border-blue-500');
                    btn.querySelector('span:first-child').classList.replace('text-blue-600', 'text-slate-400');
                    content.classList.add('hidden');
                }
            }
        }

        // --- Charts & Sim Logic ---
        let safetyChart, lotChart;

        window.onload = function() {
            initCharts();
            updateSim();
        };

        function initCharts() {
            // Safety Chart
            const ctxSafe = document.getElementById('safetyChart').getContext('2d');
            safetyChart = new Chart(ctxSafe, {
                type: 'doughnut',
                data: {
                    labels: ['Risk Capital', 'Safety Guard'],
                    datasets: [{
                        data: [70, 30],
                        backgroundColor: ['#22c55e', '#ef4444'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    cutout: '70%'
                }
            });

            // Lot Chart
            const ctxLot = document.getElementById('lotChart').getContext('2d');
            lotChart = new Chart(ctxLot, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [
                        { label: 'Actual Lot', data: [], backgroundColor: '#3b82f6', borderRadius: 4 },
                        { label: 'Capped (‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏¢‡πÑ‡∏õ)', data: [], backgroundColor: '#cbd5e1', borderRadius: 4 }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true },
                        x: { grid: { display: false } }
                    },
                    plugins: { legend: { position: 'top' } }
                }
            });
        }

        function updateSim() {
            const capital = parseFloat(document.getElementById('inp-capital').value) || 0;
            const startLot = parseFloat(document.getElementById('inp-start-lot').value) || 0;
            const lotStep = parseFloat(document.getElementById('inp-lot-step').value) || 0;
            const safetyPct = parseInt(document.getElementById('inp-safety').value) || 0;
            const maxLot = parseFloat(document.getElementById('inp-max-lot').value) || 999;
            const maxOrders = parseInt(document.getElementById('inp-max-orders').value) || 10;

            // Update UI Text
            document.getElementById('txt-safety-pct').innerText = safetyPct + '%';
            const safeVal = Math.round(capital * (safetyPct / 100));
            const riskVal = capital - safeVal;
            
            // Update the display in the mockup input
            document.getElementById('txt-stopout-display').innerText = safeVal.toFixed(1);

            document.getElementById('val-safe').innerText = '$' + safeVal;
            document.getElementById('val-risk').innerText = '$' + riskVal;

            // Warning Logic
            const warnStep = document.getElementById('warning-step');
            if (startLot !== lotStep && lotStep !== 0) {
                warnStep.classList.remove('hidden');
            } else {
                warnStep.classList.add('hidden');
            }

            // Update Safety Chart
            if(safetyChart) {
                safetyChart.data.datasets[0].data = [riskVal, safeVal];
                safetyChart.update();
            }

            // Calc Lots
            const labels = [];
            const dataActual = [];
            const dataCapped = [];
            let hitMax = false;

            for(let i=1; i<=maxOrders; i++) {
                labels.push(`Order ${i}`);
                
                // Formula from manual: "Start 0.01, Step 0.01... if lose #1, next is 0.02" -> Additive
                // Order 1: Start
                // Order 2: Start + Step
                // Order 3: Start + Step*2
                let rawLot = startLot + (lotStep * (i - 1));
                rawLot = Math.round(rawLot * 100) / 100; // Fix floating point

                let actual = rawLot;
                let capped = 0;

                if (rawLot > maxLot) {
                    actual = maxLot;
                    capped = rawLot - maxLot;
                    hitMax = true;
                }

                dataActual.push(actual);
                dataCapped.push(capped);
            }

            // Update Insight Text
            const insight = document.getElementById('lot-insight');
            if(hitMax) {
                insight.innerHTML = `‚ö†Ô∏è <strong>‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î Max Lot (${maxLot}):</strong> ‡∏Å‡∏£‡∏≤‡∏ü‡∏™‡∏µ‡πÄ‡∏ó‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö *‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡∏≠‡∏≠‡∏Å* ‡πÅ‡∏ï‡πà‡∏ñ‡∏π‡∏Å‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏ß‡πâ ‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏∏‡∏ô‡∏ä‡πâ‡∏≤‡∏•‡∏á`;
                insight.parentElement.classList.replace('bg-blue-50', 'bg-yellow-50');
                insight.parentElement.classList.replace('text-blue-800', 'text-yellow-800');
            } else {
                insight.innerHTML = `‚úÖ <strong>‡∏õ‡∏Å‡∏ï‡∏¥:</strong> ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡∏≤‡∏° Step ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ä‡∏ô‡πÄ‡∏û‡∏î‡∏≤‡∏ô Max Lot (${maxLot})`;
                insight.parentElement.classList.replace('bg-yellow-50', 'bg-blue-50');
                insight.parentElement.classList.replace('text-yellow-800', 'text-blue-800');
            }

            // Update Lot Chart
            if(lotChart) {
                lotChart.data.labels = labels;
                lotChart.data.datasets[0].data = dataActual;
                lotChart.data.datasets[1].data = dataCapped;
                lotChart.update();
            }
        }
    </script>
</body>
</html>
